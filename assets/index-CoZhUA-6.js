import{r as q,a as D,o as H,b as P,c as W,d as z,e as O,f as N,g as l,w as c,h as m,u as G,i as S,E as J}from"./index-B7BzWwGz.js";import{u as K}from"./user-DWPr-ycs.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Z={class:"login-box"},ee={class:"login-options"},te={__name:"index",setup(oe){const U=G(),C=K(),T=q(null),M=q(!1),i=D({username:"",password:"",userType:"admin"}),B={username:[{required:!0,message:"请输入账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码不能少于6位",trigger:"blur"}],userType:[{required:!0,message:"请选择身份",trigger:"change"}]},L=async()=>{try{await T.value.validate(),M.value=!0,setTimeout(()=>{const t="mock-token-"+Date.now(),e={id:1,username:i.username,name:i.username==="admin"?"管理员":"教师用户",role:i.userType};C.setToken(t),C.setUserType(i.userType),C.setUserInfo(e),J.success("登录成功"),j(),setTimeout(()=>{U.push("/admin/teacher")},1500),M.value=!1},1e3)}catch(t){console.log("登录验证失败",t)}};H(()=>{$(),X()}),P(()=>{Y()});const $=()=>{const t=document.querySelector(".stars");if(!t)return;t.innerHTML="";const e=window.innerWidth<768?30:60;for(let o=0;o<e;o++){const n=document.createElement("div");n.className="star",n.style.top=`${Math.random()*100}%`,n.style.left=`${Math.random()*100}%`,n.style.width=`${Math.random()*2.5+.5}px`,n.style.height=n.style.width,n.style.animationDelay=`${Math.random()*4}s`,t.appendChild(n)}};let b=0,V=0,g=[],w=null;const X=()=>{document.getElementById("cursor-trails-container"),w=t=>{b=t.clientX,V=t.clientY,A()},document.addEventListener("mousemove",w)},Y=()=>{w&&document.removeEventListener("mousemove",w),g=[]},A=()=>{const t=document.getElementById("cursor-trails-container");if(!t)return;const e=document.createElement("div");e.className="cursor-trail",e.style.left=`${b}px`,e.style.top=`${V}px`;const o=Math.floor(Math.random()*30)+30;e.style.backgroundColor=`hsla(${o}, 70%, 60%, 0.4)`,t.appendChild(e),g.push(e),setTimeout(()=>{e.style.opacity="0"},10),setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e),g=g.filter(n=>n!==e)},800)},R=t=>{if(t.target.closest(".login-box"))return;const e=document.getElementById("fireworks-container");if(!e)return;const o=document.createElement("div");o.className="firework",o.style.left=`${t.clientX}px`,o.style.top=`${t.clientY}px`,e.appendChild(o);const n=30,u=Math.PI*2/n;for(let r=0;r<n;r++){const a=document.createElement("div");a.className="firework-particle";const p=Math.floor(Math.random()*60)+20;a.style.backgroundColor=`hsl(${p}, 70%, 60%)`,o.appendChild(a);const d=u*r,s=2+Math.random()*3,x=Math.cos(d)*s,_=Math.sin(d)*s;let f=0,k=0,v=1,y=1;const h=()=>{if(v<=0){a.parentNode&&a.parentNode.removeChild(a);return}f+=x,k+=_,v-=.02,y-=.01,a.style.transform=`translate(${f}px, ${k}px) scale(${y})`,a.style.opacity=v,requestAnimationFrame(h)};requestAnimationFrame(h)}setTimeout(()=>{o.parentNode&&o.parentNode.removeChild(o)},2e3)},j=()=>{const t=document.getElementById("fireworks-container");if(!t)return;const e=5;for(let o=0;o<e;o++)setTimeout(()=>{const n=Math.random()*window.innerWidth,u=Math.random()*(window.innerHeight*.6),r=document.createElement("div");r.className="firework",r.style.left=`${n}px`,r.style.top=`${u}px`,t.appendChild(r);const a=40,p=Math.PI*2/a;for(let d=0;d<a;d++){const s=document.createElement("div");s.className="firework-particle";const x=Math.floor(Math.random()*360);s.style.backgroundColor=`hsl(${x}, 80%, 60%)`,r.appendChild(s);const _=p*d,f=2+Math.random()*4,k=Math.cos(_)*f,v=Math.sin(_)*f;let y=0,h=0,E=1,F=1.2;const I=()=>{if(E<=0){s.parentNode&&s.parentNode.removeChild(s);return}y+=k,h+=v+.1,E-=.01,F-=.005,s.style.transform=`translate(${y}px, ${h}px) scale(${F})`,s.style.opacity=E,requestAnimationFrame(I)};requestAnimationFrame(I)}setTimeout(()=>{r.parentNode&&r.parentNode.removeChild(r)},3e3)},o*300)};return window.addEventListener("resize",$),(t,e)=>{const o=m("el-input"),n=m("el-form-item"),u=m("el-option"),r=m("el-select"),a=m("el-button"),p=m("el-link"),d=m("el-form");return z(),W("div",{class:"login-container",onClick:R},[e[6]||(e[6]=O('<div id="stars-container" data-v-0660001f><div class="stars" data-v-0660001f></div><div class="wave" data-v-0660001f></div><div class="wave" data-v-0660001f></div><div class="wave" data-v-0660001f></div></div><div id="cursor-trails-container" data-v-0660001f></div><div id="fireworks-container" data-v-0660001f></div>',3)),N("div",Z,[e[5]||(e[5]=N("h2",{class:"login-title"},"教师管理系统",-1)),l(d,{model:i,rules:B,ref_key:"loginFormRef",ref:T,class:"login-form"},{default:c(()=>[l(n,{prop:"username"},{default:c(()=>[l(o,{modelValue:i.username,"onUpdate:modelValue":e[0]||(e[0]=s=>i.username=s),placeholder:"请输入账号","prefix-icon":"User"},null,8,["modelValue"])]),_:1}),l(n,{prop:"password"},{default:c(()=>[l(o,{modelValue:i.password,"onUpdate:modelValue":e[1]||(e[1]=s=>i.password=s),placeholder:"请输入密码","prefix-icon":"Lock",type:"password","show-password":""},null,8,["modelValue"])]),_:1}),l(n,{prop:"userType"},{default:c(()=>[l(r,{modelValue:i.userType,"onUpdate:modelValue":e[2]||(e[2]=s=>i.userType=s),placeholder:"请选择身份",style:{width:"100%"}},{default:c(()=>[l(u,{label:"管理员",value:"admin"}),l(u,{label:"教师",value:"teacher"})]),_:1},8,["modelValue"])]),_:1}),l(n,null,{default:c(()=>[l(a,{type:"primary",style:{width:"100%"},loading:M.value,onClick:L,class:"login-button"},{default:c(()=>e[3]||(e[3]=[S(" 登 录 ")])),_:1},8,["loading"])]),_:1}),N("div",ee,[l(p,{type:"primary",href:"javascript:;"},{default:c(()=>e[4]||(e[4]=[S("忘记密码？")])),_:1})])]),_:1},8,["model"])])])}}},ae=Q(te,[["__scopeId","data-v-0660001f"]]);export{ae as default};
